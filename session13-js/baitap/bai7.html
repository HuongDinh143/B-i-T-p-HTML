<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- 
    Tạo một mảng users là một mảng trống.
    Lấy thông tin từ người dùng để tạo đối tượng user gồm các thông tin sau: id, user_name, email, password
    Tiến hành validate dữ liệu
    Tên, email và mật khẩu không được để trống
    Tên không được ngắn hơn 3 ký tự
    Email đúng định dạng @gmail.com
    Mật khẩu tối thiểu 8 ký tự
    Nếu các dữ liệu nhập vào không thỏa mãn thì yêu cầu người dùng nhập lại dữ liệu
    Nếu các dữ liệu nhập vào thỏa mãn điều kiện thì thêm đối tượng vào trong mảng
     -->
    <script>
        let user = [];
        class User {
            constructor(id, user_name, email, password) {
                this.id = id;
                this.user_name = user_name;
                this.email = email;
                this.password = password;
            }
        }

        alert("Mời bạn thiết lập account");
        let id = prompt("id của bạn: ");

        function checkUserName() {
            let user_name = prompt("user_name (tối thiếu 3 ký tự)");
            if (user_name.length >= 3) {
                alert("user_name hợp lệ");
                return user_name;
            } else {
                alert(`
                user_name không hợp lệ
                user_name không đươc ngắn hơn 3 ký tự `);
                return checkUserName()
            }
        }
        let user_name = checkUserName();


        function checkEmail() {
            let email = prompt("email");
            if (email.length > 0 && email.slice(-10) == "@gmail.com") {
                alert("email hợp lệ");
                return email;
            } else {
                alert(`
                Email không hợp lệ
                Email không được để trống và email phải đúng định dạng
                `);
                return checkEmail();
            }
        }
        let email = checkEmail();

        function checkPassword() {
            let password = prompt("password (Mật khẩu tối thiểu 8 ký tự)");
            if (password.length >= 8) {
                alert("password hợp lệ, bạn đăng ký tài khoản thành công");
                return password;
            } else {
                alert(`password không hợp lệ (tối thiểu 8 ký tự)`);
                return checkPassword();
            }
        }
        let password = checkPassword();
        user.push(new User(id, user_name, email, password))
        console.log(user);

    </script>
</body>

</html>